<div class="words-container">
    <!-- Header Section -->
    <div class="page-header">
    <h1 class="page-title">Words Management</h1>
    <button class="add-btn" (click)="toggleAddModal()">
        <svg class="add-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
        </svg>
        Add New Word
    </button>
    </div>

    <!-- Statistics Cards -->
    <div class="stats-grid">
    <div class="stat-card">
        <h3>{{ getTotalWords() }}</h3>
        <p>Total Words</p>
    </div>
    <div class="stat-card">
        <h3>{{ getWordsByLevel('Beginner') }}</h3>
        <p>Beginner</p>
    </div>
    <div class="stat-card">
        <h3>{{ getWordsByLevel('Intermediate') }}</h3>
        <p>Intermediate</p>
    </div>
    <div class="stat-card">
        <h3>{{ getWordsByLevel('Advanced') }}</h3>
        <p>Advanced</p>
    </div>
    </div>

    <!-- Words Table -->
    <div class="table-container">
    <div class="table-header">
        <h2>Words List</h2>
    </div>
    
    <div class="table-wrapper" *ngIf="words.length > 0; else noWords">
        <table class="words-table">
        <thead>
            <tr>
            <th>Image</th>
            <th>Word</th>
            <th>Level</th>
            <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let word of words; trackBy: trackByWord" class="table-row">
                        
            <!-- Modern Image Cell Template - Replace your existing image cell -->
            <td class="image-cell">
            <div class="image-container" [class.no-image]="!hasValidImage(word)">
                <!-- Real image with modern error handling -->
                <img *ngIf="hasValidImage(word)" 
                    [src]="word.imageUrl" 
                    [alt]="word.word" 
                    class="word-image" 
                    loading="lazy"
                    (error)="handleImageError($event)" />
                
                <!-- Modern no-image placeholder -->
                <div *ngIf="!hasValidImage(word)" class="no-image-placeholder">
                <div class="placeholder-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                    <circle cx="9" cy="9" r="2"/>
                    <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/>
                    </svg>
                </div>
                <span class="no-image-text">No Image</span>
                </div>
            </div>
            </td>
            <td class="word-cell">
                <span class="word-text">{{ word.word }}</span>
            </td>
            <td class="level-cell">
                <span class="level-badge" *ngIf="word.level" [class]="'level-' + word.level.toLowerCase()">
                {{ word.level }}
                </span>
                <span *ngIf="!word.level" class="level-badge level-unknown">Unknown</span>
            </td>
            <td class="actions-cell">
                <div style="display: flex; justify-content: space-between;">
                    <!-- ADD EDIT BUTTON -->
                    <button class="edit-btn" (click)="openEditModal(word)" 
                            [attr.aria-label]="'Edit ' + word.word">
                        <svg class="edit-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                                d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                        </svg>
                    </button>

                    <button class="delete-btn" (click)="deleteWord(word.id)" 
                            [attr.aria-label]="'Delete ' + word.word">
                    <svg class="delete-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                            d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                    </svg>
                    </button>
                </div>
            </td>
            </tr>
        </tbody>
        </table>
    </div>

    <ng-template #noWords>
        <div class="empty-state">
        <div class="empty-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                    d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
            </svg>
        </div>
        <h3>No words found</h3>
        <p>Start by adding your first word to the collection.</p>
        </div>
    </ng-template>
    </div>

    <!-- Add Word Modal -->
    <div class="modal-overlay" *ngIf="showAddModal" (click)="closeModal($event)">
    <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
        <h2>{{ isEditMode ? 'Edit Word' : 'Add New Word' }}</h2>
        <button class="close-btn" (click)="toggleAddModal()">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
        </button>
        </div>

        <form class="modal-form" (ngSubmit)="addWord()" #wordForm="ngForm">
        <div class="form-group">
            <label for="word">Word</label>
            <input 
            type="text" 
            id="word" 
            name="word"
            [(ngModel)]="newWord.word" 
            required 
            class="form-input"
            placeholder="Enter the word"
            #wordInput="ngModel" />
            <div class="error-message" *ngIf="wordInput.invalid && wordInput.touched">
            Word is required
            </div>
        </div>

        <div class="form-group">
            <label for="level">Level</label>
            <select 
            id="level" 
            name="level"
            [(ngModel)]="newWord.level" 
            required 
            class="form-select"
            #levelSelect="ngModel">
            <option value="">Select Level</option>
            <option value="Beginner">Beginner</option>
            <option value="Intermediate">Intermediate</option>
            <option value="Advanced">Advanced</option>
            </select>
            <div class="error-message" *ngIf="levelSelect.invalid && levelSelect.touched">
            Level is required
            </div>
        </div>

        <div class="form-group optional">
        <label for="image">
            Image
            <span class="optional-indicator">Optional</span>
        </label>
        <div class="image-upload-container">
            <input 
            type="file" 
            id="image" 
            name="image"
            (change)="onImageSelected($event)" 
            accept="image/*"
            class="file-input"
            #fileInput />
            <label for="image" class="file-label optional">
            <svg class="upload-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                    d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
            </svg>
            {{ selectedFileName || 'Choose Image (Optional)' }}
            </label>
        </div>
        <div class="image-preview" *ngIf="imagePreview">
            <img [src]="imagePreview" alt="Preview" class="preview-image" />
        </div>
        </div>

        <div class="modal-actions">
            <button type="button" class="cancel-btn" (click)="toggleAddModal()">Cancel</button>
            <button type="submit" class="save-btn" [disabled]="!wordForm.valid">
                {{ isEditMode ? 'Update Word' : 'Add Word' }}
            </button>
        </div>
        </form>
    </div>
    </div>
</div>